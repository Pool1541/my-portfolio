import anime from "animejs";
import { useRef } from "react";
import { useEffect } from "react";
import styled from "styled-components";

const LogoContainer = styled.div`
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1000;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: auto;
  background-color: var(--oxford-blue);
  overflow: hidden;
  transition: all 0.5s ease;

  svg {
    width: 270px;
    height: 100px;
    visibility: hidden;
  }

  &.hidden {
    position: absolute;
    opacity: 0;
  }
`;

export default function Loader() {
  const ref = useRef();
  useEffect(() => {
    anime({
      targets: "#demo-svg path",
      strokeDashoffset: [anime.setDashoffset, 0],
      easing: "easeInExpo",
      duration: 3000,
      direction: "alternate",
      begin: () => {
        ref.current.querySelector("#demo-svg").style.visibility = "visible";
      },
      complete: () => {
        ref.current.classList.add("hidden");
        document.querySelector("body").style.overflow = "auto";
        setTimeout(() => ref.current.remove(), 500);
      },
    });
  }, []);

  return (
    <LogoContainer ref={ref}>
      <svg id="demo-svg" width="100%" height="100%">
        <path
          stroke="#64fcda"
          strokeWidth="1"
          fill="none"
          d="M0.144 77.96V4.99999L25.008 2.79199C25.392 2.72799 25.744 2.696 26.064 2.696C26.448 2.696 26.832 2.696 27.216 2.696C29.776 2.696 32.24 3.08 34.608 3.848C36.976 4.616 39.472 5.608 42.096 6.824C47.024 9 50.768 11.944 53.328 15.656C55.888 19.304 57.168 24.072 57.168 29.96C57.168 38.024 55.12 44.424 51.024 49.16C46.928 53.896 41.36 56.552 34.32 57.128L26.256 57.8V81.32L9.744 82.76L0.144 77.96ZM24.624 51.368C31.472 50.792 36.848 48.232 40.752 43.688C44.656 39.08 46.608 32.904 46.608 25.16C46.608 20.872 45.84 17.128 44.304 13.928C42.768 10.728 40.56 8.232 37.68 6.44C34.864 4.584 31.44 3.65599 27.408 3.65599C27.024 3.65599 26.64 3.65599 26.256 3.65599C25.872 3.65599 25.488 3.688 25.104 3.752L1.104 5.86399V77L15.696 75.752V52.136L24.624 51.368ZM15.696 18.44L22.224 17.864C22.48 17.864 22.704 17.864 22.896 17.864C23.152 17.8 23.376 17.768 23.568 17.768C25.936 17.768 27.792 18.472 29.136 19.88C30.544 21.224 31.248 23.592 31.248 26.984C31.248 30.504 30.384 33.128 28.656 34.856C26.928 36.584 24.784 37.576 22.224 37.832L15.696 38.408V18.44ZM26.256 35.624C27.536 34.728 28.528 33.608 29.232 32.264C29.936 30.92 30.288 29.16 30.288 26.984C30.288 25.64 30.192 24.584 30 23.816L26.256 24.104V35.624ZM103.193 82.952C102.745 83.016 102.265 83.048 101.753 83.048C101.305 83.048 100.857 83.048 100.409 83.048C97.0813 83.048 94.0093 82.568 91.1933 81.608C88.4413 80.712 85.7533 79.656 83.1293 78.44C76.2813 75.048 71.2573 70.28 68.0573 64.136C64.9213 57.928 63.3533 50.568 63.3533 42.056C63.3533 37.064 63.9613 32.232 65.1773 27.56C66.4573 22.824 68.3453 18.568 70.8413 14.792C73.3373 10.952 76.4413 7.816 80.1533 5.384C83.9293 2.952 88.3453 1.512 93.4013 1.064C93.9133 0.999996 94.3933 0.967995 94.8413 0.967995C95.2893 0.967995 95.7373 0.967995 96.1853 0.967995C99.3853 0.967995 102.233 1.384 104.729 2.216C107.225 2.984 109.753 3.88 112.313 4.904C116.921 6.75999 120.761 9.512 123.833 13.16C126.905 16.808 129.209 21.096 130.745 26.024C132.281 30.888 133.049 36.104 133.049 41.672C133.049 46.856 132.441 51.816 131.225 56.552C130.009 61.288 128.153 65.576 125.657 69.416C123.225 73.192 120.121 76.264 116.345 78.632C112.633 81.064 108.249 82.504 103.193 82.952ZM93.4973 77.192C98.4253 76.808 102.713 75.464 106.361 73.16C110.009 70.792 113.017 67.752 115.385 64.04C117.753 60.264 119.513 56.072 120.665 51.464C121.881 46.792 122.489 41.928 122.489 36.872C122.489 32.264 121.945 27.88 120.857 23.72C119.833 19.496 118.233 15.752 116.057 12.488C113.881 9.224 111.129 6.664 107.801 4.808C104.537 2.88799 100.665 1.92799 96.1853 1.92799C95.7373 1.92799 95.2893 1.92799 94.8413 1.92799C94.4573 1.92799 94.0093 1.96 93.4973 2.024C88.5693 2.472 84.2813 3.88 80.6333 6.248C76.9853 8.552 73.9453 11.592 71.5133 15.368C69.0813 19.08 67.2573 23.24 66.0413 27.848C64.8893 32.392 64.3133 37.128 64.3133 42.056C64.3133 46.856 64.8573 51.4 65.9453 55.688C67.0333 59.912 68.6653 63.656 70.8413 66.92C73.0173 70.12 75.7693 72.648 79.0973 74.504C82.4253 76.36 86.2973 77.288 90.7133 77.288C91.2253 77.288 91.7053 77.288 92.1533 77.288C92.6013 77.288 93.0493 77.256 93.4973 77.192ZM93.4973 62.312C93.2413 62.312 92.9853 62.344 92.7293 62.408C92.5373 62.408 92.3133 62.408 92.0573 62.408C88.2173 62.408 85.1773 60.744 82.9373 57.416C80.7613 54.088 79.6733 48.52 79.6733 40.712C79.6733 35.144 80.2813 30.664 81.4973 27.272C82.7133 23.88 84.3773 21.384 86.4893 19.784C88.6013 18.12 90.9373 17.192 93.4973 17C93.7533 17 94.0093 17 94.2653 17C94.5213 16.936 94.7773 16.904 95.0333 16.904C98.8093 16.904 101.753 18.536 103.865 21.8C105.977 25 107.033 30.504 107.033 38.312C107.033 46.632 105.753 52.648 103.193 56.36C100.697 60.008 97.4653 61.992 93.4973 62.312ZM93.2093 61.352C96.9853 61.032 100.057 59.112 102.425 55.592C104.857 52.072 106.073 46.312 106.073 38.312C106.073 34.664 105.849 31.56 105.401 29C104.953 26.44 104.281 24.36 103.385 22.76C103.065 22.696 102.745 22.664 102.425 22.664C102.105 22.6 101.785 22.568 101.465 22.568C97.6893 22.568 94.8733 24.552 93.0173 28.52C91.1613 32.424 90.2333 38.088 90.2333 45.512C90.2333 49.224 90.4893 52.392 91.0013 55.016C91.5133 57.576 92.2493 59.688 93.2093 61.352ZM179.037 82.952C178.589 83.016 178.109 83.048 177.597 83.048C177.149 83.048 176.701 83.048 176.253 83.048C172.925 83.048 169.853 82.568 167.037 81.608C164.285 80.712 161.597 79.656 158.973 78.44C152.125 75.048 147.101 70.28 143.901 64.136C140.765 57.928 139.197 50.568 139.197 42.056C139.197 37.064 139.805 32.232 141.021 27.56C142.301 22.824 144.189 18.568 146.685 14.792C149.181 10.952 152.285 7.816 155.997 5.384C159.773 2.952 164.189 1.512 169.245 1.064C169.757 0.999996 170.237 0.967995 170.685 0.967995C171.133 0.967995 171.581 0.967995 172.029 0.967995C175.229 0.967995 178.077 1.384 180.573 2.216C183.069 2.984 185.597 3.88 188.157 4.904C192.765 6.75999 196.605 9.512 199.677 13.16C202.749 16.808 205.053 21.096 206.589 26.024C208.125 30.888 208.893 36.104 208.893 41.672C208.893 46.856 208.285 51.816 207.069 56.552C205.853 61.288 203.997 65.576 201.501 69.416C199.069 73.192 195.965 76.264 192.189 78.632C188.477 81.064 184.093 82.504 179.037 82.952ZM169.341 77.192C174.269 76.808 178.557 75.464 182.205 73.16C185.853 70.792 188.861 67.752 191.229 64.04C193.597 60.264 195.357 56.072 196.509 51.464C197.725 46.792 198.333 41.928 198.333 36.872C198.333 32.264 197.789 27.88 196.701 23.72C195.677 19.496 194.077 15.752 191.901 12.488C189.725 9.224 186.973 6.664 183.645 4.808C180.381 2.88799 176.509 1.92799 172.029 1.92799C171.581 1.92799 171.133 1.92799 170.685 1.92799C170.301 1.92799 169.853 1.96 169.341 2.024C164.413 2.472 160.125 3.88 156.477 6.248C152.829 8.552 149.789 11.592 147.357 15.368C144.925 19.08 143.101 23.24 141.885 27.848C140.733 32.392 140.157 37.128 140.157 42.056C140.157 46.856 140.701 51.4 141.789 55.688C142.877 59.912 144.509 63.656 146.685 66.92C148.861 70.12 151.613 72.648 154.941 74.504C158.269 76.36 162.141 77.288 166.557 77.288C167.069 77.288 167.549 77.288 167.997 77.288C168.445 77.288 168.893 77.256 169.341 77.192ZM169.341 62.312C169.085 62.312 168.829 62.344 168.573 62.408C168.381 62.408 168.157 62.408 167.901 62.408C164.061 62.408 161.021 60.744 158.781 57.416C156.605 54.088 155.517 48.52 155.517 40.712C155.517 35.144 156.125 30.664 157.341 27.272C158.557 23.88 160.221 21.384 162.333 19.784C164.445 18.12 166.781 17.192 169.341 17C169.597 17 169.853 17 170.109 17C170.365 16.936 170.621 16.904 170.877 16.904C174.653 16.904 177.597 18.536 179.709 21.8C181.821 25 182.877 30.504 182.877 38.312C182.877 46.632 181.597 52.648 179.037 56.36C176.541 60.008 173.309 61.992 169.341 62.312ZM169.053 61.352C172.829 61.032 175.901 59.112 178.269 55.592C180.701 52.072 181.917 46.312 181.917 38.312C181.917 34.664 181.693 31.56 181.245 29C180.797 26.44 180.125 24.36 179.229 22.76C178.909 22.696 178.589 22.664 178.269 22.664C177.949 22.6 177.629 22.568 177.309 22.568C173.533 22.568 170.717 24.552 168.861 28.52C167.005 32.424 166.077 38.088 166.077 45.512C166.077 49.224 166.333 52.392 166.845 55.016C167.357 57.576 168.093 59.688 169.053 61.352ZM218.113 77.672V4.712L234.529 3.272L244.129 8.07199V59.24L257.569 58.088L267.169 62.888V79.112L227.713 82.472L218.113 77.672ZM233.569 61.16V4.328L219.073 5.576V76.712L256.609 73.448V59.144L233.569 61.16Z"
        ></path>
      </svg>
    </LogoContainer>
  );
}
